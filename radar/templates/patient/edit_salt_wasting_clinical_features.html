{% extends 'patient/base.html' %}

{% set current_patient_page = 'salt_wasting_clinical_features' %}

{% from 'macros/forms.html' import render_horizontal_field as render_field %}
{% from 'macros/forms.html' import render_form_errors %}

{% block content %}
    <h1 class="page-header">Clinical Features</h1>

    {{ render_form_errors(form) }}

    <form method="POST" class="form-horizontal">
        {{ form.hidden_tag() }}

        <h3>For Childhood Onset</h3>

        {{ render_field(form.normal_pregnancy) }}

        <div id="normal_pregnancy_extra">
            {{ render_field(form.abnormal_pregnancy_text) }}
        </div>

        <h3>Neurological Problems</h3>

        {{ render_field(form.neurological_problems) }}

        <div id="neurological_problems_extra">
            {{ render_field(form.seizures) }}
            {{ render_field(form.abnormal_gait) }}
            {{ render_field(form.deafness) }}
            {{ render_field(form.other_neurological_problem) }}

            <div id="other_neurological_problem_extra">
                {{ render_field(form.other_neurological_problem_text) }}
            </div>
        </div>

        <h3>Joint Problems</h3>

        {{ render_field(form.joint_problems) }}

        <div id="joint_problems_extra">
            {{ render_field(form.joint_problems_age) }}
            {{ render_field(form.x_ray_abnormalities) }}

            <div id="x_ray_abnormalities_extra">
                {{ render_field(form.chondrocalcinosis) }}
                {{ render_field(form.other_x_ray_abnormality) }}

                <div id="other_x_ray_abnormality_extra">
                    {{ render_field(form.other_x_ray_abnormality_text) }}
                </div>
            </div>
        </div>

        {% if not read_only %}
            <button class="btn btn-success" type="submit">Save</button>
        {% endif %}
    </form>
{% endblock %}

{% block body_js %}
    <script>
        $(function() {
            toggle_extra_fields('normal_pregnancy', '#normal_pregnancy_extra', 'n');
            toggle_extra_fields('neurological_problems', '#neurological_problems_extra', 'y');
            toggle_extra_fields('other_neurological_problem', '#other_neurological_problem_extra', 'y');
            toggle_extra_fields('joint_problems', '#joint_problems_extra', 'y');
            toggle_extra_fields('x_ray_abnormalities', '#x_ray_abnormalities_extra', 'y');
            toggle_extra_fields('other_x_ray_abnormality', '#other_x_ray_abnormality_extra', 'y');
        });
    </script>
{% endblock %}
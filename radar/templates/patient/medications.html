{% extends 'patient/base.html' %}

{% set current_patient_page = 'medications' %}

{% block content %}
    <h1>Medications</h1>

    <p><a href="{{ url_for('medications.add_medication', patient_id=patient.id) }}" class="btn btn-primary">New</a></p>

    <table class="table table-condensed table-striped">
        <thead>
            <tr>
                <th></th>
                <th>From Date</th>
                <th>To Date</th>
                <th>Name</th>
                <th></th>
            </tr>
        </thead>

        <tbody>
            {% for medication in medications %}
                <tr>
                    <td>
                        {% if medication.edit_url %}
                            <a href="{{ medication.edit_url }}" class="btn btn-primary btn-xs">Edit</a>
                        {% elif medication.view_url %}
                            <a href="{{ medication.view_url }}" class="btn btn-primary btn-xs">View</a>
                        {% endif %}
                    </td>

                    <td>{{ medication.from_date | date_format | missing }}</td>
                    <td>{{ medication.to_date | date_format | missing }}</td>
                    <td>{{ medication.name | missing }}</td>

                    <td align="right">
                        {% if medication.delete_url %}
                            <form method="POST" action="{{ medication.delete_url }}" class="form-inline">
                                <button type="submit" class="btn btn-link btn-xs">
                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete
                                </button>
                            </form>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
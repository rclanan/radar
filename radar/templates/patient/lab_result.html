{% extends 'patient/base.html' %}

{% set current_patient_page = 'lab_results' %}

{% from 'macros/forms.html' import render_horizontal_field as render_field %}
{% from 'macros/forms.html' import render_horizontal_button as render_button %}

{% block content %}
    {% if lab_order.id %}
        <h1 class="page-header">Edit Lab Result</h1>
    {% else %}
        <h1 class="page-header">Add Lab Result</h1>
    {% endif %}

    {% if not lab_order.id %}
        <form class="form-horizontal" method="POST">
            {{ select_form.hidden_tag() }}

            {{ render_field(select_form.lab_order_definition_id) }}

            {% call render_button() %}
                <button type="submit" class="btn btn-primary">Select</button>
            {% endcall %}
        </form>

        <hr />
    {% endif %}

    <div id="lab_order_form">
        {% if form %}
            <form method="POST" class="form-horizontal">
                {{ form.hidden_tag() }}

                {{ form.lab_order_definition_id }}

                {{ render_field(form.unit_id) }}

                <hr />

                {{ render_field(form.date) }}

                {% if form.pre_post %}
                    {{ render_field(form.pre_post) }}
                {% endif %}

                {% for field in form.result_fields %}
                    {{ render_field(field) }}
                {% endfor %}

                {% call render_button() %}
                    <button type="submit" class="btn btn-success" name="lab_order_form">Save</button>
                {% endcall %}
            </form>
        {% endif %}
    </div>
{% endblock %}